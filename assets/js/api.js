let baseUrl=(window.location.href.includes("file")||window.location.href.includes("localhost"),"https://api.homesfy.in/"),projectId=2580,RegNo,city,is_magnet=0,magnet_id,magnet_number,IVR_phone_no,whatsappNumber;async function getProjectData(e){let t=window.location.toString();var r=new URL(t).searchParams.get("magnet_id");try{let a;if(e&&r)a=await fetch("https://api.homesfy.in/api/leads/projectdata/"+e+"?magnet_id="+r);else{if(!e)return"Error : Project id not provided ";a=await fetch("https://api.homesfy.in/api/leads/projectdata/"+e)}if(a.ok)return await a.json();throw Error("Failed to fetch project data")}catch(n){return console.error("Error fetching project data:",n),n}}async function SendLead(e,t){try{let r=await fetch(baseUrl+"api/leads/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t||(t="thankyou.html"),r.ok)return window.location.href=t,1;throw Error("Failed to send lead data")}catch(a){return console.error("Error sending lead data:",a),a}}function updateContactElements(e,t,r){let a=document.getElementsByClassName("IVR_Phone_No_Text");for(let n=0;n<a.length;n++)a[n].innerText=e||"+917948540394";let o=document.getElementsByClassName("IVR_Phone_No_Url");for(let i=0;i<o.length;i++)o[i].href=`tel:${e||"+917948540394"}`;let s=document.getElementsByClassName("whatsapp_url");for(let l=0;l<s.length;l++)s[l].href=`https://api.whatsapp.com/send?phone=+91${t||"8976997450"}&text=I want to know more about ${r||"the property"}`}async function apiDataGet(e){try{let t=await getProjectData(e);if(t&&t.result){e=t.result.Project.p_id,IVR_phone_no=t.result.magnet_id?t.result.magnet_number:t.result.phone,whatsappNumber=t.result.whatsupUser.phone;let r=t.result.wp_links_sms;(r=r.split("="))[1]=t.result.magnet_id?"+91"+t.result.magnet_number+"&text":r[1],r[2]="I want to know more about "+r[2],r=r.join("="),city=t.result.Project.Region.city,RegNo=t.result.Project.Region.region_name,is_magnet=t.result.is_magnet,magnet_id=t.result.magnet_id?t.result.magnet_id:null,updateContactElements(IVR_phone_no,whatsappNumber,t.result.Project.project_name)}}catch(a){console.error("Error initializing API data:",a),updateContactElements("917304927701","917304412403","the property")}}function changeProjectId(e){projectId=e,apiDataGet(e)}async function getIpAddress(){try{let e=await fetch("https://api.ipify.org/?format=json",{mode:"cors"});if(!e.ok)return"0.0.0.0";{let t=await e.json();return console.log(t,"IP Address"),t.ip||"0.0.0.0"}}catch(r){return console.error("Error fetching IP address:",r),"0.0.0.0"}}function deviceData(){let e;return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/Windows Phone/i)?"Mobile":navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)?"Tablet":navigator.userAgent.match(/BlackBerry/i)?"Blackberry":"Desktop"}function browserData(){let e;return -1!=(navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))?e="Opera":94!=navigator.userAgent.indexOf("Chrome")?e="Chrome":-1!=navigator.userAgent.indexOf("Mozilla")?e="Mozilla":-1!=navigator.userAgent.indexOf("Safari")?e="Safari":-1!=navigator.userAgent.indexOf("Firefox")?e="Firefox":(-1!=navigator.userAgent.indexOf("MSIE")||!0==!!document.documentMode)&&(e="MSIE"),e}function queryForm(e=null){var t={},r=!!e&&!!e.reset&&e.reset,a=window.location.toString().split("?");if(a.length>1){var n=a[1].split("&");for(let o in n){var i=n[o].split("=");(r||null===sessionStorage.getItem(i[0]))&&sessionStorage.setItem(i[0],i[1]),"utm_source"==i[0]&&(t.utmsource=i[1]),"utm_medium"==i[0]&&(t.utmmedium=i[1]),"utm_campaign"==i[0]&&(t.utmcampaign=i[1]),"utm_content"==i[0]&&(t.utmcontent=i[1]),"utm_term"==i[0]&&(t.utmterm=i[1]),"p_nationality"==i[0]&&(t.param_nationality=i[1]),"p_regionid"==i[0]&&(t.param_region_id=i[1])}return t}return null}